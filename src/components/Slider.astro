---
interface Props {
  id: string;
  label: string;
  min: number;
  max: number;
  step: number;
  default: number;
  description?: string;
}

const { id, label, min, max, step, default: defaultValue, description } = Astro.props;
---

<div class="slider-component">
  <label for={id} class="block text-sm font-medium text-gray-700 mb-1">{label}</label>
  <input
    type="range"
    id={id}
    min={min}
    max={max}
    step={step}
    value={defaultValue}
    class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"
  />
  <div class="flex justify-between mt-1">
    <span class="text-xs text-gray-500">{min}</span>
    <output for={id} class="text-sm text-gray-700">{defaultValue}</output>
    <span class="text-xs text-gray-500">{max}</span>
  </div>
  {description && <p class="mt-1 text-sm text-gray-500">{description}</p>}
</div>

<script define:vars={{ id, defaultValue }}>
  const slider = document.getElementById(id);
  const output = slider.nextElementSibling.children[1];
  
  slider.addEventListener('input', function() {
    output.textContent = this.value;
    calculateResults();
  });

  function calculateResults() {
    const students = parseInt(document.getElementById('students').value);
    const pagesStudent = parseInt(document.getElementById('pagesStudent').value);
    const mailoutsStudent = parseInt(document.getElementById('mailoutsStudent').value);
    const staff = parseInt(document.getElementById('staff').value);
    const pagesStaff = parseInt(document.getElementById('pagesStaff').value);

    // Calculate costs
    const paperCost = (students * pagesStudent) * 0.014;
    const printingCost = (students * pagesStudent + staff * pagesStaff) * 0.012;
    const maintenanceCost = ((students * pagesStudent + staff * pagesStaff) / 50000) * 395;
    const postageCost = (students * mailoutsStudent) * 0.5;
    const totalCost = paperCost + printingCost + maintenanceCost + postageCost;

    // Update results
    document.getElementById('paperCost').textContent = `$${paperCost.toFixed(2)}`;
    document.getElementById('printingCost').textContent = `$${printingCost.toFixed(2)}`;
    document.getElementById('maintenanceCost').textContent = `$${maintenanceCost.toFixed(2)}`;
    document.getElementById('postageCost').textContent = `$${postageCost.toFixed(2)}`;
    document.getElementById('totalCost').textContent = `$${totalCost.toFixed(2)}`;
  }
</script> 