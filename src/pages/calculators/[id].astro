---
import SiteLayout from '../../layouts/SiteLayout.astro';
import { calculatorMap } from '../../data/calculators';

export function getStaticPaths() {
  const paths = Object.keys(calculatorMap).map(id => ({
    params: { id }
  }));
  return paths;
}

const { id } = Astro.params;
const calculator = calculatorMap[id];

if (!calculator) {
  return Astro.redirect('/calculators');
}
---

<SiteLayout 
  title={calculator.name}
  description={calculator.description}
>
  <div>
    <div class="mb-8">
      <h1 class="text-3xl font-bold text-gray-900">{calculator.name}</h1>
      <p class="text-gray-600 mt-2">{calculator.description}</p>
    </div>

    <div id="calculator" data-config={id}></div>
  </div>
</SiteLayout>

<link rel="stylesheet" href="/calculator.css" />
<script is:inline src="/calculator.js"></script>