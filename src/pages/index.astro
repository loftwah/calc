---
import SiteLayout from '../layouts/SiteLayout.astro';
import { calculatorMap } from '../data/calculators';

const operooCalc = calculatorMap['operoo'];

// Welcome to Astro! Wondering what to do next? Check out the Astro documentation at https://docs.astro.build
// Don't want to use any of this? Delete everything in this file, the `assets`, `components`, and `layouts` directories, and start fresh.
---

<SiteLayout title="SchoolStatus Calculator - Embedding Instructions">
	<div class="space-y-8">
		<h1 class="text-3xl font-bold text-gray-900">SchoolStatus Calculator Widget</h1>
		
		<section class="bg-white p-6 rounded-lg shadow">
			<h2 class="text-xl font-semibold mb-4">Basic Embedding</h2>
			<div class="bg-gray-50 p-4 rounded-md">
				<pre class="text-sm overflow-x-auto"><code>&lt;div id="calculator" data-config="operoo"&gt;&lt;/div&gt;
&lt;script src="https://calc.deanlofts.xyz/calculator.js" async&gt;&lt;/script&gt;</code></pre>
			</div>
			<p class="mt-4 text-gray-600">Add this code to any page where you want the calculator to appear.</p>
		</section>

		<section class="bg-white p-6 rounded-lg shadow-sm">
			<h2 class="text-xl font-semibold mb-6">Live Demo</h2>
			<div class="bg-gray-50 p-8 rounded-xl">
				<div class="space-y-6">
					{operooCalc.elements.map(element => {
						if (element.type === 'slider') {
							return (
								<div class="form-group">
									<label for={element.id}>{element.label}</label>
									<input 
										type="range"
										id={element.id}
										min={element.min}
										max={element.max}
										step={element.step}
										value={element.default}
									/>
									<div class="slider-labels">
										<span>{element.min}</span>
										<output>{element.default}</output>
										<span>{element.max}</span>
									</div>
									{element.description && <p class="description">{element.description}</p>}
								</div>
							);
						}
					})}

					<div class="results">
						<div class="flex justify-between">
							<span>Paper Cost</span>
							<span id="paperCost">$0.00</span>
						</div>
						<div class="flex justify-between">
							<span>Printing Cost</span>
							<span id="printingCost">$0.00</span>
						</div>
						<div class="flex justify-between">
							<span>Maintenance Cost</span>
							<span id="maintenanceCost">$0.00</span>
						</div>
						<div class="flex justify-between">
							<span>Postage Cost</span>
							<span id="postageCost">$0.00</span>
						</div>
						<div class="flex justify-between">
							<span class="font-bold">Total Cost</span>
							<span id="totalCost" class="font-bold">$0.00</span>
						</div>
					</div>
				</div>
			</div>
		</section>

		<section class="bg-white p-6 rounded-lg shadow">
			<h2 class="text-xl font-semibold mb-4">Available Calculators</h2>
			<ul class="list-disc list-inside space-y-2 text-gray-600">
				<li><code>data-config="operoo"</code> - SchoolStatus Operoo Cost Calculator</li>
				<li><code>data-config="template"</code> - Template Calculator (Demo)</li>
			</ul>
		</section>

		<section class="bg-white p-6 rounded-lg shadow">
			<h2 class="text-xl font-semibold mb-4">Domain Restrictions</h2>
			<p class="text-gray-600">This widget is restricted to run only on approved domains. Contact support if you need to whitelist your domain.</p>
		</section>

		<section class="bg-white p-6 rounded-lg shadow">
			<h2 class="text-xl font-semibold mb-4">Quick Links</h2>
			<div class="space-y-2">
				<a href="/calculators" class="text-blue-600 hover:underline block">View All Calculators</a>
			</div>
		</section>
	</div>
</SiteLayout>

<link rel="stylesheet" href="/calculator.css" />
<script is:inline src="/calculator.js"></script>
